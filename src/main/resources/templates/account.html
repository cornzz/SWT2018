<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" lang="en">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <title>My Account</title>
    </head>

    <body>
        <h1>My Account</h1>
        <div th:include="fragments/navigation :: navigation"></div>

        <div class="alert alert-success" th:if="${param.success}" role="alert">Information saved successfully!</div>

        <!-- Edit Account Form -->
        <form method="post" role="form" id="form" th:action="@{/account}" th:object="${form}">
            <!-- First Name, Last Name -->
            <div style="display: flex;">
                <div class="form-group" style="flex: 1;">
                    <label for="firstName" class="bmd-label-floating">First Name</label>
                    <input type="text" class="form-control" id="firstName" th:field="*{firstName}">
                </div>
                <div class="form-group" style="flex: 1;">
                    <label for="lastName" class="bmd-label-floating">Last Name</label>
                    <input type="text" class="form-control" id="lastName" th:field="*{lastName}">
                </div>
            </div>
            <div class="alert alert-warning" th:if="${#fields.hasErrors('firstName') || #fields.hasErrors('lastName')}"
                                             th:text="${#fields.errors('firstName') + ' ' + #fields.errors('lastName')}" role="alert">
            </div>

            <!-- E-Mail -->
            <div class="form-group">
                <label for="email" class="bmd-label-floating">E-Mail</label>
                <input type="email" class="form-control" id="email" th:field="*{email}">
            </div>
            <div class="alert alert-warning" th:each="error : ${#fields.errors('email')}" th:text="${error}" role="alert"></div>

            <!-- Phone -->
            <div class="form-group">
                <label for="phone" class="bmd-label-floating">Phone</label>
                <input type="tel" class="form-control" id="phone" th:field="*{phone}">
            </div>
            <div class="alert alert-warning" th:each="error : ${#fields.errors('phone')}" th:text="${error}" role="alert"></div>

            <div style="margin-top: 20px;">
                <button type="button" id="edit" onclick="" class="btn btn-secondary">Cancel</button>
                <button type="submit" id="submit" class="btn btn-primary btn-raised">Submit</button>
            </div>
        </form>

        <!-- Button trigger modal
        <button type="button" class="btn btn-outline-primary" data-toggle="modal" data-target="#passModal">Change password</button> -->

        <!--Change Password Modal
        <div class="modal fade" id="passModal" tabindex="-1" role="dialog" aria-labelledby="passModalTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="passModalTitle">Change password</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">-->
                        <form method="post" role="form" id="passwordForm" th:action="@{/account/changepass}" th:object="${form}">
                            <!-- Old Password -->
                            <div class="form-group" style="margin-bottom: 25px;">
                                <label for="oldPassword" class="bmd-label-floating">Current Password</label>
                                <input type="password" class="form-control" id="oldPassword" th:field="*{oldPassword}">
                            </div>
                            <div class="alert alert-primary" th:each="error : ${#fields.errors('oldPassword')}"
                                 th:text="${error}" role="alert"></div>
                            <!-- New Password -->
                            <div class="form-group" style="margin-bottom: 25px;">
                                <label for="newPassword" class="bmd-label-floating">New Password</label>
                                <input type="password" class="form-control" id="newPassword" th:field="*{password}">
                                <span class="bmd-help">We'll never share your password with anyone else.</span>
                            </div>
                            <div class="form-group" style="margin-bottom: 25px;">
                                <label for="newPasswordConfirm" class="bmd-label-floating">Repeat New Password</label>
                                <input type="password" class="form-control" id="newPasswordConfirm" th:field="*{passwordRepeat}">
                            </div>
                            <div class="alert alert-primary" th:if="${#fields.hasErrors('passwordRepeat') || #fields.hasErrors('password')}"
                                 th:text="${#fields.errors('passwordRepeat') + ' ' + #fields.errors('password')}" role="alert" id="passAlert">
                                Passwords have to match!
                            </div>


                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                            <button type="submit" id="submitPassword" class="btn btn-primary btn-raised">Submit</button>
                        </form>
                        <!--
                    </div>
                </div>
            </div>
        </div>
        -->
        <script>
            // Unused
            // $(function () {
            //     toggleForm();
            //     $('.alert-warning')[0] ? toggleForm() : '';
            //     $('.alert-primary')[0] ? $('#passModal').modal('show') : '';
            // });
            //
            // function toggleForm() {
            //     $('form#form :input').each(function() {
            //        $(this).attr('readonly') ? $(this).removeAttr('readonly') : $(this).attr('readonly', true);
            //     });
            //
            //     if ($('#edit').text() === 'Cancel') {
            //         $('#edit').text('Edit');
            //         $('#submit').attr('disabled', true);
            //         return;
            //     }
            //     $('#edit').text('Cancel');
            //     $('#submit').removeAttr('disabled');
            // }
        </script>
    </body>
</html>